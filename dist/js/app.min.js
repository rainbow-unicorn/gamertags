$(document).ready(function(){function myFacebookLogin(){FB.login(function(response){response.authResponse?getFriendCodes():console.log("Authorization failed.")},{scope:"public_profile"})}function getFriendCodes(){FB.api("/561961807201477",function(response){!response||response.error?alert("Something went wrong."):(extractGamertags(response.message),renderList(Gamertags))})}function extractGamertags(message){var html=$.parseHTML(message);$.each(html,function(i,el){if("undefined"!=el.childNodes.length&&el.childNodes.length>=2){for(var props=el.textContent.split(/[.]+/),tag=[],c=0;c<props.length;c++)if(props[c].match(/\d{4}-\d{4}-\d{4}/))tag.gamertag=props[c];else{if(!props[c].match(/[\w()]+/))return!1;tag.gamer=props[c]}Gamertags.push(tag)}}),console.log(Gamertags),alert("Gamertags logged.")}function renderList(gamertags){for(var i=0;i<gamertags.length;i++)$("#gaymertags").DataTable().row.add({gamer:gamertags[i].gamer,gamertag:gamertags[i].gamertag}).draw()}var Gamertags=[],loginModal=$("[data-remodal-id=login]").remodal();loginModal.open(),$("#gaymertags").DataTable({columns:[{data:"gamer"},{data:"gamertag"}]}),$(document).on("closing",".remodal",function(e){myFacebookLogin()})});